<section id="block-{{ forloop.index }}" class="uk-section">
  <div class="uk-container uk-text-{{ block.align | default: 'left' }}">

    {% if block.heading != empty or block.text != empty %}
      <div class="uk-margin-large-bottom uk-container-small{% if block.align == 'center' %} uk-margin-auto{% endif %}">
        {% if block.heading != empty %}
          <h2 class="uk-margin-remove">{{ block.heading }}</h2>
        {% endif %}
        {% if block.text != empty %}
          <div class="uk-text-lead{% if block.heading %} uk-margin-top{% endif %}">{{ block.text | markdownify  }}</div>
        {% endif %}
      </div>
    {% endif %}

    <div class="uk-flex-center uk-grid-large uk-child-width-1-2 uk-child-width-1-{{ block.columns | default: '3' }}@m" data-uk-grid>
      {% for card in block.cards %}
        <div>
          <div class="uk-grid-small uk-flex uk-flex-middle" data-uk-grid>
            {% if card.icon != empty %}
              <div class="{% if block.align == 'center' %} uk-width-1-1{% else %}uk-width-auto{% endif %}">
                <img src="{% if card.icon contains 'http' %}{{ card.icon }}{% else %}{{ card.icon | absolute_url }}{% endif %}" alt="{{ card.heading }}">
              </div>
            {% endif %}
            <div class="uk-width-expand">
              <h3 class="uk-margin-remove">{{ card.heading }}</h3>
            </div>
          </div>
          {% if card.text != empty %}
            <div class="uk-margin-top">{{ card.text }}</div>
          {% endif %}
          {% if card.button.url != empty %}
            <div class="uk-margin-top">
              <a class="uk-button uk-button-default" href="{% if card.button.url contains 'http' %}{{ card.button.url }}{% else %}{{ card.button.url | relative_url }}{% endif %}">{{ card.button.text }}</a>
            </div>
          {% endif %}
        </div>
      {% endfor %}
    </div>
  </div>
</section>